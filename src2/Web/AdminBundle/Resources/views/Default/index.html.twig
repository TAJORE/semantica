{% extends 'AdminBundle::layout.html.twig' %}
{% block meta %}
    <meta name = "{% trans from 'refer' %} home.title {% endtrans %}" >
    <meta name = "keywords" content = "{% trans from 'refer' %} home.description {% endtrans %}" >
{% endblock %}
{% block title %}
    Semantica Technologies Corporation - STC - Admin
{% endblock %}

{% block mycss %}
    <link rel="stylesheet" href="{{ asset('components/cssbase/datatablehelp.css') }}">
    <link rel="stylesheet" href="{{ asset('components/cssbase/datatablehelp2.css') }}">
    <style>
        #navadmin{
            padding-top: 1.5%;
        }
    </style>
{% endblock %}
{% block header %}
    {{ parent() }}

{% endblock %}
{% block  main %}
    <div class="row" id="admin_index">
       <div class="col s12 card">
          <center>
              <h3>{% trans from 'forms' %} form.project.list {% endtrans %}</h3>
          </center>
           <table id="example" class="mdl-data-table responsive-table" cellspacing="0" width="100%">
               <thead>
               <tr>
                   <th>{% trans from 'forms' %} form.project.name {% endtrans %}</th>
                   <th>{% trans from 'forms' %} form.project.phone {% endtrans %}</th>
                   <th>{% trans from 'forms' %} form.project.email {% endtrans %}</th>
                   <th>{% trans from 'forms' %} form.project.type {% endtrans %}</th>
                   <th>{% trans from 'forms' %} form.project.objet {% endtrans %}</th>
                   <th>{% trans from 'forms' %} form.project.date {% endtrans %}</th>
                   <th>#</th>
               </tr>
               </thead>

               <tbody>
               {% for projet in list  %}
                   {% set href= "#project"~projet.id %}
                   {% set idhref = "project"~projet.id %}
                   <tr>
                       <td>{{ projet.truncate(projet.name,30) }}</td>
                       <td>{{ projet.truncate(projet.phone,30) }}</td>
                       <td>{{ projet.truncate(projet.email,30) }}</td>
                       <td>{{ projet.truncate(projet.type,30) }}</td>
                       <td>{{ projet.truncate(projet.objet,30) }}</td>
                       <td>{{ projet.time|date('d-m-Y') }}</td>
                       <td><a href="{{ href }}"><i class="material-icons">attach_file</i></a></td>
                   </tr>
                   <div id="{{ idhref }}" class="modal">
                      <div class="modal-content">
                          <iframe src="{{ path('admin_download',{id:projet.id}) }}" class="col s12"  width="100%" height="500" align="middle"></iframe>
                      </div>
                      <div class="modal-footer">
                          <button  id="close" class="modal-action modal-close waves-effect waves-green btn-flat blue white-text">{% trans from 'forms' %} form.project.close {% endtrans %}</button>
                      </div>
                   </div>

               {% endfor %}
               </tbody>
           </table>
       </div>
    </div>
{% endblock %}

{% block myjs %}
    <script>
        $(document).ready(function() {
            $('.modal').modal();
            $('#example').DataTable( {
                responsive: true,
                columnDefs: [
                    {
                        targets: [ 0, 1, 2 ],
                        className: 'mdl-data-table__cell--non-numeric'
                    }
                ]
            } );
        } );
    </script>
{% endblock %}
